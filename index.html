<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Address Form</title>

</head>

<body>

    <form id="gform" action="https://docs.google.com/forms/u/0/d/1huiEHRs2odB-Q7Ng15B7OiOTxKvyeaXpF93vLi8xdhA/formResponse" method="POST" target="_self">

        <input name="entry.1573920476" placeholder="Name" required><br>
        <input name="entry.1883987193" placeholder="Surname" required><br>
        <input name="entry.681709445" type="email" placeholder="Email" required><br>
        <input name="entry.1269550060" placeholder="Consent" required><br>

        <!-- Visible autocomplete field -->
    	<script type="module" src="https://ajax.googleapis.com/ajax/libs/@googlemaps/extended-component-library/0.6.11/index.min.js"></script>
        <gmpx-api-loader key="MAPS_API_KEY" solution-channel="GMP_GE_placepicker_v2">
        </gmpx-api-loader>
        <div id="place-picker-box">
            <div id="place-picker-container">
                <gmpx-place-picker placeholder="Enter an address"></gmpx-place-picker>
            </div>
        </div>

        <!-- Hidden Google Form field -->
        <input type="hidden" name="entry.1707553072" id="address-hidden">

        <button type="submit">Submit</button>
    </form>

    <script>
        const picker = document.getElementById("place-picker");
        const hiddenAddress = document.getElementById("address-hidden");
        let addressSelected = false;

        picker.addEventListener("gmpx-placechange", (event) => {
            const place = event.detail.place;

            if (!place || !place.formattedAddress) {
                addressSelected = false;
                hiddenAddress.value = "";
                return;
            }

            hiddenAddress.value = place.formattedAddress;
            addressSelected = true;
        });

        document.getElementById("gform").addEventListener("submit", (e) => {
            if (!addressSelected) {
                e.preventDefault();
                alert("Please select an address from the suggestions.");
            }
        });
    </script>

</body>

</html>